Importing Workflows
===

Importing workflows allows you to add capabilities to your instance of Aquarium.
A workflow consists of a set of Operation Types, Protocols, Code Libraries, Sample Type definitions and Container definitions.
Workflows are stored in files ending with .aq.
You can find workflows to import on in the Community &gt; Workflows section of this website.
When you import a workflow, Aquarium attempts to be conservative about changing existing workflows already installed.
For example, Aquarium will not overwrite your Sample Type or Containers with Sample Types and/or Containers of the same name.
You can also configure what to do if there are existing Operation Types with the same names as the ones you are importing.

**Good Practice:** Make a back up of your Aquarium database before important a workflow. At this time, there is no easy
  un-import feature in Aquarium.

Viewing Workflow Information
---

To import a workflow, go to "Import Workflows" available in the drop down menu at the top left in the Aquarium tool bar.
Next, click "LOAD" and choose a file ending in .aq from your local computer, which will load the workflow into the user interface.
In particular, the operation types, libraries and inventory definitions that will be added to your instance of Aquarium will be shown.

Controlling the Import
---

On the left sidebar, choose how you want to import the workflow.
- Check DEPLOY if you would like all new operation types to automatically be deployed after being imported.
      If you do not choose this option, you will have to navigate to each new operation type in the Developer tab and
      click "Deploy" there.
- Choose what you want to happen when Aquarium finds an operation type with the same name and in the same category
      as one you are important. Aquarium can "Fail", meaning the import does not occur. Aquarium cam "Skip" importing the
      particular operation type. Or if you choose "Rename Existing", Aquarium will rename and re-catagorize existing operation types.

Finalizing the Import
---

Finally, once you are happy with the options, click "IMPORT". If the import is successful, Aquarium will let you know. Otherwise,
Aquarium will describe problems it encountered while importing. One common problem is that existing Sample Type or Container types
have the same names as the ones you are importing, but have some fields defined differently. If you are certain it is okay to do so,
you can change those fields to match the incoming definitions, and then attempt the import again.

Exporting / Publishing Workflows
===

Exporting workflows allows you to package up a set of Operation Types, Protocols, Code Libraries, Sample Type definitions and Container definitions that can be later imported by someone else. You can either generate a workflow file (with a .aq extension), or you can generate an entire Github repository and webpage for your workflow that allows users to read through all the documentation for your workflow before importing it, and to, for example, post issues and questions about the workflow.

Github Parameters or Direct Export
---

To export a workflow, first go to "Export Workflows" available in the drop down menu at the top left in the Aquarium tool bar.
Next, choose the operation types and libraries to include in the workflow in the expandable list in the left sidebar.
If you would simply like to generate a .aq file, type the desired name of the file and click "EXPORT" under Step 1 Alternative.
Otherwise, fill in the for under Step 1. The meaning of the fields is as follows:
- **User Name:** Your Github user name.
- **Repository Name:** The name of the github repository that you would like to create for your new workflow. Alternatively, you can
      update an existing repository that was previously generated by Aquarium.
- **Organization (Optional):** If you would like to publish your workflow under an organization instead of your user name, type the name of a Github
    organization of which you are a member. You must have permission to make new public repositories in this organization.
- **Access Token:** To create an access token for Aquarium, go to your Github account, choose Settings, click "Developer Settings",
    click "Personal Access Tokens", and click "Generate new token". Then describe the token and be sure to click the "repo"
    scope so that Aquarium can manipulate your workflow repositories.

Workflow Information
---

Describe your workflow with a title, description, version number, and copyright holder.
Note that your title will appear on the main Aquarium software page (if you tell us about your workflow), so should be fairly specific.
For example, call your workflow "Franklin Lab Crystallography" instead of just "Crystallography", since there may ultimately end up
being many Crystallography workflows available. Also list who is maintaining the workflow, who the authors are, and anyone you would like to Acknowledgement. Funding sources could be good to acknowledge in addition to people.

Review Workflow Information
---

Click "REVIEW" and check that all the information about your workflow is correct. Click "GO BACK" if you would like to change something. Select or deselect components in the left sidebar to make sure you are including exactly what you want.

Publish
---

Click "PUBLISH" to complete the process. Aquarium will create a new Github repository for you, compile all the documentation, and push it to the repo. Once Aquarium is finished, it will show you a link to your repository, which will look something like the following:

      js
        + definitions.js
      libraries
        + Lib1.html
        + Lib1.rb
        ...
      object_types
        + ObjectType1.md
        ....
      operations_types
        + OperationType1.md
        ...
      sample_types
        + SampleType1.md
        ...
      .nojekyll
      ABOUT.md
      LICENSE.md
      README.md
      config.json
      index.html
      your-workflow.aq

Note that if you update your workflow by going through the above steps with an existing, Aquarium generated repo, then Aquarium will regenrate all of these files except README.md and LICENSE.md. Thus, changes you make to those two files will be preserved.

You should now edit the README.md to describe how to use your workflow. Typically, this document will given an overview of what the workflow does and describe common ways the operation types can be strung together into plans. Workflows that consist of libraries only should describe the intent of the library in the README.md.

You should also edit LICENSE.md to customize the license to suit your needs. Note that you are under absolutely no obligation from the makers of Aquarium to license your code in any particular way. Please check with your university or company for any requirements they may have.

Set up Gihub Pages
---

Go to your repository and choose Settings and then choose Github Pages &gt; Source &gt; master branch. Do not choose a theme, as Aquarium does not require one (it does not use jekyll). Then click Save. Wait a little while and eventually the link to your newly published Aquarium workflow will go live. Note that Github takes its own time when publishing to Github pages. Usually it will do so after a commit and push, but not always.

Tell Us About Your Workflow
---

Email Eric Klavins <klavins@uw.edu> with a link to the Github repo containing your workflow. He'll add it to the Community &gt; Workflows page of the Aquarium website!
