# The Aquarium LIMS

This document describes how to use the Aquarium LIMS as a researcher.
To learn how to set up the LIMS with your lab's sample and container types, see the
<a href="#" onclick="select('Lab Management','Inventory Definitions')">Inventory Definitions</a>
page.
The examples below use the Widget sample type definition, which is available in the `test-workflow.aq` within the _Test Workflow_, found on the
<a href="#" onclick="select('Community','Workflows')">Workflows</a> page.

## Creating and Editing New Samples

To create a new sample, click **SAMPLES** in the Aquarium main menu, and then click **NEW** in the tool bar.
The **NEW** button will expand into a list of all sample types.

Select a sample type from the list to create a new sample definition with the selected type.
This definition is unsaved, and you can add more by clicking **NEW** multiple times.
To delete an unsaved sample definition, click the &times; on the right of the sample.

For instance, we can add two new, unsaved Widget types so that the screen looks like the following

<img src="docs/lims/images/new-sample.png"
     alt="clicking NEW twice creates forms for two new samples"
     width="100%">

and would fill in the forms to define each sample.

To create a sub-sample for the second widget, click the arrows next to the word **parent** and select Widget.
When done, the forms should look something like

<img src="docs/lims/images/new-sample-filled-out.png"
     alt="we can edit the values of the fields for the new samples"
     width="100%">

Note that in the Parent field for the first sample, we have entered the name of an existing sample, "widget one".
Here and elsewhere in Aquarium, if you type the first three letters (or more) of a sample name, the form will give you a list of matching sample names from which you may choose the one you want.

To save the new sample definition, click **SAVE**.

Editing samples is similar.
Find the sample you want to edit, click **Actions &gt; Edit** in the sample's heading, and edit the form.

## Searching for Samples

To search for samples, enter a sample name or ID **Sample Name or ID** field in the left sidebar of the samples page, and click **SEARCH**.
For a name search, you can search with a prefix that is at least three characters.
Leaving the **Sample Name or ID** field blank will display all samples

Restrict the search by adding a sample type name, project name or user name.

## Creating New Items

To create a new item associated with a given sample, find that sample and click **Actions &gt; New Item**, which will bring up a menu with all the containers associated with that sample type.
Choose the container, and a new item will be made.
The location of the item will either be automatically generated by a location wizard, or will be _Bench_ if the container has no associated wizard.

### Searching for Items

To search for an item, enter the ID of the item in the **FIND ITEM** form and click **FIND ITEM**.
Doing so will bring up an item specific popup with information about the item, its location, and any associated data.

<img src="docs/lims/images/item-popup.png"
     alt="popup display of an example item resulting from a search with FIND ITEM"
     width="80%">

### Associating Data and File Uploads with Items

To associate data with an item, use the item popup and click **ADD DATA**.
Fill in the key and value and click the arrow with a box around it to save, or the &times; to cancel.

To associate an uploaded file, click **UPLOAD** and choose a file.
Fill in the key to use to for the upload and save as you would a data association.
To view the file, you can click on the file name. Images will appear inline, and other file types will have download links.

### Changing Item Locations and Deleting Items

To move an item, enter a new location and save it.
If the location is managed by a wizard, it will check to make sure there isn't already an item in the new location.

You can also delete an item, by clicking the trash can.
Deleting the item does not remove the item from the system, and the item can be later restored if needed.

## Managing Collections

Under most circumstances, you will likely only have collections that are constructed by protocols, or external scripts.
However, there may be situations in which you will want to manually create a collection as an input for a plan.

To create a new collection, you must already have an object type defined for a collection.
To do this, set the handler of the object type to `collection`.

Once you have at least one collection type, click the **NEW COLLECTION** button on the **Samples** tab, and choose the type of collection to make.
Doing so will take you to the Collection editor page where you can add sample type information, associated data, and upload files using a spreadsheet like interface.

<img src="docs/lims/images/collection-data.png"
     alt="an example 96 well plate of widget items showing concentration values"
     width="100%">

Click on each entry to set the sample for the collection part.
Each part of a collection is a separate item with it's own item ID.

You can also use the editor to define associations with each part, though you should only do this after you have assigned all of the samples.
To add an association, click **Data > New Key**, then indicate the key for the data association.
This will update the view of the collection, and allow you to edit the value for the key that you just added by typing into the entry for the part.
Click **Save** to save the values you've added.

You can also switch between the samples view and the views for whatever data associations you have added.
Be sure to click **Save** before switching views or leaving the page.
